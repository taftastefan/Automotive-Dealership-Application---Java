<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adauga Vanzare</title>
    <link rel="stylesheet" href="/styles.css">
    <script>
        function validateForm(event) {
            const dataVanzare = document.getElementById("dataVanzare").value;
            const pretFinal = document.getElementById("pretFinal").value;
            const idClient = document.getElementById("idClient").value;
            const idMasina = document.getElementById("idMasina").value;
            const idAngajat = document.getElementById("idAngajat").value;

            const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
            const numberRegex = /^[0-9]+$/;

            let errors = [];

            if (!dateRegex.test(dataVanzare)) {
                errors.push("Data vanzarii trebuie să fie în formatul yyyy-mm-dd și să conțină doar cifre și cratime.");
            }

            if (!numberRegex.test(pretFinal)) {
                errors.push("Prețul final trebuie să conțină doar cifre.");
            }

            if (!numberRegex.test(idClient)) {
                errors.push("ID Client trebuie să conțină doar cifre.");
            }

            if (!numberRegex.test(idMasina)) {
                errors.push("ID Masina trebuie să conțină doar cifre.");
            }

            if (!numberRegex.test(idAngajat)) {
                errors.push("ID Angajat trebuie să conțină doar cifre.");
            }

            if (errors.length > 0) {
                event.preventDefault();
                const errorDiv = document.getElementById("error-messages");
                errorDiv.innerHTML = errors.join("<br>");
                errorDiv.style.display = "block";
            }
        }
    </script>
</head>
<body>
<div class="container">
    <h1>Adauga O Noua Vanzare</h1>
    <form action="/vanzare/add" method="post" onsubmit="validateForm(event)">
        <div id="error-messages" class="error" style="display: none; color: red; margin-bottom: 15px;"></div>

        <label for="dataVanzare">Data Vanzare:</label>
        <input type="text" id="dataVanzare" name="dataVanzare" placeholder="yyyy-mm-dd" required>

        <label for="pretFinal">Pret Final:</label>
        <input type="text" id="pretFinal" name="pretFinal" required>

        <label for="idClient">ID Client:</label>
        <input type="number" id="idClient" name="idClient" required>

        <label for="idMasina">ID Masina:</label>
        <input type="number" id="idMasina" name="idMasina" required>

        <label for="idAngajat">ID Angajat:</label>
        <input type="number" id="idAngajat" name="idAngajat" required>

        <button type="submit">Adauga Vanzare</button>
    </form>
    <a href="/showVanzari">Inapoi la Vanzari</a>
</div>
</body>
</html>
